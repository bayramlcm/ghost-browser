# Ghost Browser

üåê [English](README.md) | [T√ºrk√ße](README.tr.md) | [‰∏≠Êñá](README.zh-CN.md) | [Espa√±ol](README.es.md) | [–†—É—Å—Å–∫–∏–π](README.ru.md) | [Portugu√™s](README.pt-BR.md)

–°—Ç–µ–ª—Å-–±—Ä–∞—É–∑–µ—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞ –±–∞–∑–µ Docker —Å –æ–±—Ö–æ–¥–æ–º –∞–Ω—Ç–∏–±–æ—Ç-–∑–∞—â–∏—Ç—ã.  
–ü–∞—Ç—á–∏—Ç –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª Chrome —Å –ø–æ–º–æ—â—å—é `undetected-chromedriver`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –±—Ä–∞—É–∑–µ—Ä–∞ —á–µ—Ä–µ–∑ HTTP API.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–û–±—Ö–æ–¥ –∞–Ω—Ç–∏–±–æ—Ç–∞** ‚Äî –ü–∞—Ç—á –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ Chrome —á–µ—Ä–µ–∑ `undetected-chromedriver`
- **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä** ‚Äî Chrome –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º, –±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫–∏ (`/fetch`)
- **HTTP API** ‚Äî –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã FastAPI: `/fetch`, `/navigate`, `/screenshot`, `/health`
- **–û—á–∏—Å—Ç–∫–∞ –≤–∫–ª–∞–¥–æ–∫** ‚Äî –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤** ‚Äî Chrome –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
- **–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** ‚Äî Chrome –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 1 —á–∞—Å (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é)
- **Bearer Token –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî –ü—Ä–æ—Å—Ç–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ API
- **–ì–æ—Ç–æ–≤ –¥–ª—è Docker** ‚Äî –õ—ë–≥–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Coolify / Docker Compose

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
docker compose up -d

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
docker build -t ghost-browser .
docker run -p 3000:3000 -e TOKEN=your-secret-token --shm-size=2g ghost-browser
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
python -m virtualenv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

pip install -r requirements.txt
cp .env.example .env

uvicorn app.main:app --host 0.0.0.0 --port 3000
```

## API

### `POST /fetch` ‚ö° (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä** ‚Äî Chrome –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º, —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫–∏.  
–ù–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ `/navigate`, —Ç–∞–∫ –∫–∞–∫ Chrome –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.

```bash
curl -X POST http://localhost:3000/fetch \
  -H "Authorization: Bearer your-secret-token" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://jsonplaceholder.typicode.com/todos/1", "returnType": "json"}'
```

| –ü–æ–ª–µ | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------------|----------|
| `url` | string | ‚Äî | –¶–µ–ª–µ–≤–æ–π URL (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| `timeout` | int | `0` | –¢–∞–π–º–∞—É—Ç (–º—Å), 0 = –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| `returnType` | string | `json` | `json` \| `html` \| `text` \| `screenshot` |

### `POST /navigate`

–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä Chrome –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ.

### `POST /screenshot`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç PNG-—Å–∫—Ä–∏–Ω—à–æ—Ç URL.

### `GET /health`

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∏ –±—Ä–∞—É–∑–µ—Ä–∞.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `TOKEN` | `""` | –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø—É—Å—Ç–æ = –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏) |
| `MAX_CONCURRENT` | `3` | –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ |
| `HEADLESS` | `true` | –ë–µ–∑–≥–æ–ª–æ–≤—ã–π —Ä–µ–∂–∏–º Chrome |
| `PORT` | `3000` | –ü–æ—Ä—Ç API |
| `CHROME_VERSION` | `auto` | –ú–∞–∂–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è Chrome |
| `TAB_IDLE_TIMEOUT` | `60` | –¢–∞–π–º–∞—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ (—Å–µ–∫—É–Ω–¥—ã) |
| `BROWSER_MAX_AGE` | `3600` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ Chrome (—Å–µ–∫—É–Ω–¥—ã) |

## `/fetch` vs `/navigate`

| | `/fetch` ‚ö° | `/navigate` |
|---|---|---|
| –ó–∞–ø—É—Å–∫ Chrome | –ù–µ—Ç (–æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º) | –ù–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä |
| –°–∫–æ—Ä–æ—Å—Ç—å | ~200-500–º—Å | ~5000-15000–º—Å |
| –ü–∞–º—è—Ç—å | –ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∫–ª–∞–¥–æ–∫ | –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ |
| Cookies | –û–±—â–∏–µ (–æ–¥–Ω–∞ —Å–µ—Å—Å–∏—è) | –ß–∏—Å—Ç—ã–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑ |

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
